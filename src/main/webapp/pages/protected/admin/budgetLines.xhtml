<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/template/template.xhtml">

   <ui:define name="title">Budeget Lines</ui:define>
   <ui:define name="pageTitle">Budeget Lines</ui:define>

   <ui:define name="content">
      <h:head>
         <style>
            .first-layer-top {
               display: flex;
               justify-content: space-between;
            }

            ul.navList{
               display: flex;
               justify-content: center;
               padding-left: 0 !important;
            }

            .navListItem{
               margin-left: 3rem;
            }

            div.btn-sect{
            }

            .second-layer-top {
               display: inline-flex;
               justify-content: space-between;
               width: calc(100% - 25px);
               align-items: center;
            }

            input#searchForm\:search.ui-inputfield {
               width: 840px !important;
            }
         </style>
      </h:head>

      <div class="first-layer-top">
         <div class="navigation">
            <h:form>
               <ul class="navList">
                  <li class="">
                     <h:commandLink styleClass="listLink" action="#{navigationBean.changeBudgetLineSection('currentBudgetLines')}">
                        <h:outputText value="Current Budget Lines" />
                        <p:ajax update="contentSection" />
                     </h:commandLink>
                  </li>
                  <li class="navListItem">
                     <h:commandLink styleClass="listLink" action="#{navigationBean.changeBudgetLineSection('budgetLineDrafts')}">
                        <h:outputText value="Drafts" />
                        <p:ajax update="contentSection" />
                     </h:commandLink>
                  </li>
                  <li class="navListItem">
                     <h:commandLink styleClass="listLink" action="#{navigationBean.changeBudgetLineSection('expiredBudgetLines')}">
                        <h:outputText value="Expired Budget Lines" />
                        <p:ajax update="contentSection" />
                     </h:commandLink>
                  </li>
                  <li class="navListItem">
                     <h:commandLink styleClass="listLink" action="#{navigationBean.changeBudgetLineSection('budgetLineCategories')}">
                        <h:outputText value="Budget Line Categories" />
                        <p:ajax update="contentSection" />
                     </h:commandLink>
                  </li>
               </ul>
            </h:form>

         </div>
         <div class="btn-sect">

            <p:commandButton value="Create budget Line" oncomplete="PF('dlg').show();" process="@this" update="dlg"/>

            <p:dialog header="Create budget Line" widgetVar="dlg" modal="true" id="dlg" resizable="false" width="600">
               <h:panelGrid>
                  <h:outputLabel for="name" value="Name:"/>
                  <p:inputText id="name" value="#{registerBean.email}" required="true"
                               requiredMessage="Name is required!">
                  </p:inputText>

                  <!-- Budget Line Dropdown -->
                  <h:outputLabel for="category" value="Category:"/>
                  <p:selectOneMenu id="category" value="#{registerBean.selectedBudgetLine}" required="true"
                                   requiredMessage="Category is required!">
                     <f:selectItem itemLabel="Select a Category" itemValue="" noSelectionOption="true"/>
                     <f:selectItems value="#{registerBean.budgetLines}" var="category"
                                    itemLabel="#{budgetLine.name}" itemValue="#{budgetLine.id}"/>
                  </p:selectOneMenu>
                  <h:message id="categoryMessage" for="category"/>


                  <h:outputLabel for="startDate" value="Start Date:"/>
                  <p:calendar id="startDate" value="#{registerBean.dateOfBirth}" pattern="dd/MM/yyyy"
                              required="true" showOn="button" navigator="true"
                              styleClass="custom-calendar"
                              requiredMessage="Start Date is required!"/>

                  <h:outputLabel for="endDate" value="End Date:"/>
                  <p:calendar id="endDate" value="#{registerBean.dateOfBirth}" pattern="dd/MM/yyyy"
                              required="true" showOn="button" navigator="true"
                              styleClass="custom-calendar"
                              requiredMessage="End Date is required!"/>


                  <h:outputLabel for="amount" value="Amount:"/>
                  <p:inputText id="amount" value="#{registerBean.email}" required="true"
                               requiredMessage="Amount is required!"/>

               </h:panelGrid>

               <p:commandButton value="Create" action="#{registerBean.register()}"
                                oncomplete="PF('dlg').hide();"/>
            </p:dialog>

            <p:commandButton value="Create Category" oncomplete="PF('Catdlg').show();" process="@this" update="Catdlg"/>
            <p:dialog header="Create Category For budget Line" widgetVar="Catdlg" modal="true" id="Catdlg" resizable="false" width="600">
               <h:panelGrid>
                  <h:outputLabel for="categoryName" value="Category Name :"/>
                  <p:inputText id="categoryName" value="#{registerBean.email}" required="true"
                               requiredMessage="Name is required!"/>

                  <h:outputLabel for="description" value="Description:"/>
                  <p:inputTextarea id="description" value="#{registerBean.description}" rows="4" cols="50"
                                   required="true" requiredMessage="Description is required!"/>
                  <h:message id="descriptionMessage" for="description"/>

                  <p:commandButton value="Create" action="#{registerBean.register()}"
                                   oncomplete="PF('dlg').hide();"/>

               </h:panelGrid>
            </p:dialog>
         </div>
      </div>

      <h:panelGroup id="contentSection">
         <ui:include src="#{navigationBean.selectedBudgetLineSection}.xhtml" />
      </h:panelGroup>

   </ui:define>

</ui:composition>